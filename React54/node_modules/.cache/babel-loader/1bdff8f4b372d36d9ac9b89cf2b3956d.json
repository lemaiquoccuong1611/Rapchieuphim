{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\Frontend\\\\React54\\\\src\\\\components\\\\layout\\\\ShowtimesHome.jsx\";\nimport React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { withRouter } from \"react-router\";\nimport { connect } from 'react-redux';\nimport { getTheaterSystemListAction, getTheaterListAction, getLichChieuHTRListAction } from '../../redux/actions/TheaterSystemManageAction';\nimport { Tabs, Tag } from 'antd';\nimport moment from 'moment';\nimport { showMessageAlert } from '../../templates/SweetAlert';\n\nclass ShowtimesHome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.checkLichChieu = phim => {\n      let mangLC = []; // if(phim.MaPhim === maPhim){\n\n      phim.ListNgayChieuGioChieu.map((tgc, index) => {\n        let thoiGianChieu = moment(new Date(tgc.ThoiGianChieu)).format(\"DD.MM.YYYY\");\n        var now = moment(new Date()).format(\"DD.MM.YYYY\"); //todays date\n        // console.log('now', now, \"thoiGianChieu\", thoiGianChieu);\n\n        var startDate = moment(thoiGianChieu, \"DD.MM.YYYY\");\n        var endDate = moment(now, \"DD.MM.YYYY\");\n        var duration = endDate.diff(startDate, 'days');\n\n        if (duration === 0) {\n          mangLC.push(duration);\n        }\n      }); // }\n\n      if (mangLC.length > 0) {\n        return true;\n      }\n\n      return false;\n    };\n\n    this.renderTheaterSystemList = () => {\n      const {\n        TabPane\n      } = Tabs;\n      let theaterSystemArray = this.props.theaterSystemArray;\n      return theaterSystemArray.map((theater, index) => {\n        return /*#__PURE__*/_jsxDEV(TabPane, {\n          tab: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: theater.Logo,\n            className: \"theater__logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 31\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            tabPosition: \"left\",\n            defaultActiveKey: \"0\",\n            children: theater.DanhSachCumRap.map((r, a) => {\n              return /*#__PURE__*/_jsxDEV(TabPane, {\n                tab: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"theater__cumrap d-flex align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"theater__image mr-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: process.env.PUBLIC_URL + \"/img/bhd.jpg\",\n                      alt: \"R\\u1EA1p\",\n                      width: \"50px\",\n                      height: \"50px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 67,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 66,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"theater__infor\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0\",\n                      children: r.TenCumRap\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 70,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"theater__address\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: r.ThongTin\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 72,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 71,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 37\n                }, this),\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"showtime__content\",\n                  children: theater.mangLichChieu.map((lichChieu, index) => {\n                    // console.log(\"lichChieu\", lichChieu);\n                    return lichChieu.ListCumRap.map((lc, i) => {\n                      if (lc.MaCumRap === r.MaCumRap) {\n                        console.log(\"lc.MaCumRap\", lc.MaCumRap);\n                        return lc.ListPhim.map((phim, i) => {\n                          // if (duration == 0) \n                          if (this.checkLichChieu(phim)) {\n                            return /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"row  py-4 pl-4 showtime__movie\",\n                              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-2\",\n                                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                                  \"data-fancybox\": \"images\",\n                                  src: phim.HinhAnh,\n                                  className: \"img-fluid\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 92,\n                                  columnNumber: 73\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 91,\n                                columnNumber: 69\n                              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-10\",\n                                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                                  className: \"showtime__detail\",\n                                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                    className: \"mb-3 d-flex\",\n                                    children: phim.ListTheLoai.map((theLoai, i) => {\n                                      return /*#__PURE__*/_jsxDEV(Tag, {\n                                        style: {\n                                          fontSize: '14px',\n                                          textTransform: 'uppercase'\n                                        },\n                                        color: \"orange\",\n                                        children: theLoai.TenTheLoai\n                                      }, i, false, {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 98,\n                                        columnNumber: 93\n                                      }, this);\n                                    })\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 96,\n                                    columnNumber: 77\n                                  }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                                    children: phim.TenPhim\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 101,\n                                    columnNumber: 77\n                                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                                    children: phim.MoTa\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 102,\n                                    columnNumber: 77\n                                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                                    href: \"#\",\n                                    className: \"d-block mb-4\",\n                                    children: [\"FULL SYNOPSIS\", /*#__PURE__*/_jsxDEV(\"i\", {\n                                      className: \"fa fa-angle-right\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 105,\n                                      columnNumber: 74\n                                    }, this)]\n                                  }, void 0, true, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 103,\n                                    columnNumber: 77\n                                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                                    className: \"showtime__list d-flex align-items-center\",\n                                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                                      className: \"fa fa-clock-o  mr-2\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 108,\n                                      columnNumber: 81\n                                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                      className: \"mr-2\",\n                                      style: {\n                                        width: '120px'\n                                      },\n                                      children: \" VIEWING TIMES\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 109,\n                                      columnNumber: 81\n                                    }, this), phim.ListNgayChieuGioChieu.map((tgc, tgcIndex) => {\n                                      // console.log('tgc', tgc);\n                                      let thoiGianChieu = moment(new Date(tgc.ThoiGianChieu)).format(\"DD.MM.YYYY\");\n                                      let thoiGianView = new Date(tgc.ThoiGianChieu);\n                                      var now = moment(new Date()).format(\"DD.MM.YYYY\"); //todays date\n                                      // console.log('now', now, \"thoiGianChieu\", thoiGianChieu);\n\n                                      var startDate = moment(thoiGianChieu, \"DD.MM.YYYY\");\n                                      var endDate = moment(now, \"DD.MM.YYYY\");\n                                      var duration = endDate.diff(startDate, 'days'); // Lấy thời gian hiện tại\n\n                                      var parseTime = timeString => moment(timeString, 'HH:mm');\n\n                                      let timeCurrent = moment(new Date()).format(\"HH:mm\");\n                                      let timeLC = moment(new Date(tgc.ThoiGianChieu)).format(\"HH:mm\"); // var days = (duration);\n                                      // console.log(\"days\", parseTime(timeLC).isAfter(parseTime(timeCurrent)))\n                                      // days.toFixed(0)\n\n                                      if (duration === 0) {\n                                        console.log(phim.MaPhim, parseTime(timeLC).isBefore(parseTime(timeCurrent)));\n                                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                                            className: \"btn m-1\",\n                                            disabled: parseTime(timeLC).isBefore(parseTime(timeCurrent)),\n                                            onClick: () => this.handleBookingPage(tgc.MaLichChieu),\n                                            children: thoiGianView.toLocaleTimeString()\n                                          }, tgcIndex, false, {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 131,\n                                            columnNumber: 101\n                                          }, this)\n                                        }, tgcIndex, false, {\n                                          fileName: _jsxFileName,\n                                          lineNumber: 130,\n                                          columnNumber: 97\n                                        }, this);\n                                      }\n                                    })]\n                                  }, void 0, true, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 107,\n                                    columnNumber: 77\n                                  }, this)]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 95,\n                                  columnNumber: 73\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 94,\n                                columnNumber: 69\n                              }, this)]\n                            }, i, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 90,\n                              columnNumber: 65\n                            }, this);\n                          }\n                        });\n                      }\n                    });\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 37\n                }, this)\n              }, a, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 33\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }, this);\n      });\n    };\n\n    this.renderTime = () => {};\n\n    this.renderLichChieuHTR = maHeThongRap => {\n      this.props.getLichChieuHTRList(maHeThongRap);\n    };\n  }\n\n  componentDidMount() {\n    this.props.getTheaterSystemList(); // this.props.getLichChieuHTRList('cgv');\n  }\n\n  handleBookingPage(maLichChieu) {\n    console.log(\"MaLichChieu\", maLichChieu);\n\n    if (!localStorage.getItem('userLogin')) {\n      showMessageAlert(\"Note\", \"Login to continue booking!\", \"warning\");\n    } else {\n      this.props.history.push(`/bookingticket/${maLichChieu}`);\n    }\n  }\n\n  render() {\n    const theaterSystemArray = this.props.theaterSystemArray; // console.log(\"theaterSystemArray\", theaterSystemArray);\n    // Tabs\n\n    const {\n      TabPane\n    } = Tabs;\n\n    function callback(key) {\n      console.log(key);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"showtime\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"section-title\",\n                children: \"showtimes MOVIES\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"showtime__frame container\",\n            children: /*#__PURE__*/_jsxDEV(Tabs, {\n              tabPosition: \"left\",\n              defaultActiveKey: \"0\",\n              children: this.renderTheaterSystemList()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this);\n  }\n\n} // ReactDOM.render(<ShowtimesHome />, mountNode);\n\n\nconst mapStateToProps = state => {\n  return {\n    theaterSystemArray: state.TheaterSystemManageReducer.theaterSystemArray,\n    theaterArray: state.TheaterSystemManageReducer.theaterArray\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getTheaterSystemList: () => {\n      dispatch(getTheaterSystemListAction());\n    },\n    getTheaterList: maHeThongRap => {\n      // console.log(maHeThongRap);\n      dispatch(getTheaterListAction(maHeThongRap));\n    },\n    getLichChieuHTRList: maHeThongRap => {\n      dispatch(getLichChieuHTRListAction(maHeThongRap));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ShowtimesHome));","map":{"version":3,"sources":["C:/Users/Acer/Desktop/Frontend/React54/src/components/layout/ShowtimesHome.jsx"],"names":["React","Component","NavLink","withRouter","connect","getTheaterSystemListAction","getTheaterListAction","getLichChieuHTRListAction","Tabs","Tag","moment","showMessageAlert","ShowtimesHome","constructor","props","checkLichChieu","phim","mangLC","ListNgayChieuGioChieu","map","tgc","index","thoiGianChieu","Date","ThoiGianChieu","format","now","startDate","endDate","duration","diff","push","length","renderTheaterSystemList","TabPane","theaterSystemArray","theater","Logo","DanhSachCumRap","r","a","process","env","PUBLIC_URL","TenCumRap","ThongTin","mangLichChieu","lichChieu","ListCumRap","lc","i","MaCumRap","console","log","ListPhim","HinhAnh","ListTheLoai","theLoai","fontSize","textTransform","TenTheLoai","TenPhim","MoTa","width","tgcIndex","thoiGianView","parseTime","timeString","timeCurrent","timeLC","MaPhim","isBefore","handleBookingPage","MaLichChieu","toLocaleTimeString","renderTime","renderLichChieuHTR","maHeThongRap","getLichChieuHTRList","componentDidMount","getTheaterSystemList","maLichChieu","localStorage","getItem","history","render","callback","key","mapStateToProps","state","TheaterSystemManageReducer","theaterArray","mapDispatchToProps","dispatch","getTheaterList"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { NavLink } from 'react-router-dom'\nimport { withRouter } from \"react-router\";\nimport { connect } from 'react-redux'\nimport { getTheaterSystemListAction, getTheaterListAction, getLichChieuHTRListAction } from '../../redux/actions/TheaterSystemManageAction';\n\nimport { Tabs, Tag } from 'antd';\nimport moment from 'moment';\nimport { showMessageAlert } from '../../templates/SweetAlert';\n\nclass ShowtimesHome extends Component {\n\n    constructor(props) {\n        super(props)\n    }\n\n    componentDidMount() {\n        this.props.getTheaterSystemList();\n        // this.props.getLichChieuHTRList('cgv');\n    }\n\n    handleBookingPage(maLichChieu) {\n        console.log(\"MaLichChieu\", maLichChieu);\n        if (!localStorage.getItem('userLogin')) {\n            showMessageAlert(\"Note\", \"Login to continue booking!\", \"warning\")\n        }\n        else {\n            this.props.history.push(`/bookingticket/${maLichChieu}`);\n        }\n    }\n\n    checkLichChieu = (phim) => {\n        let mangLC = [];\n        // if(phim.MaPhim === maPhim){\n        phim.ListNgayChieuGioChieu.map((tgc, index) => {\n            let thoiGianChieu = moment(new Date(tgc.ThoiGianChieu)).format(\"DD.MM.YYYY\");\n            var now = moment(new Date()).format(\"DD.MM.YYYY\"); //todays date\n            // console.log('now', now, \"thoiGianChieu\", thoiGianChieu);\n            var startDate = moment(thoiGianChieu, \"DD.MM.YYYY\");\n            var endDate = moment(now, \"DD.MM.YYYY\");\n            var duration = endDate.diff(startDate, 'days');\n            if (duration === 0) {\n                mangLC.push(duration);\n            }\n        })\n        // }\n        if (mangLC.length > 0) {\n            return true;\n        }\n        return false;\n    }\n\n    renderTheaterSystemList = () => {\n        const { TabPane } = Tabs;\n        let theaterSystemArray = this.props.theaterSystemArray;\n        return theaterSystemArray.map((theater, index) => {\n            return (\n                <TabPane tab={<img src={theater.Logo} className=\"theater__logo\" />} key={index}>\n                    {/* {theater.maHeThongRap} */}\n                    <Tabs tabPosition=\"left\" defaultActiveKey=\"0\" >\n                        {theater.DanhSachCumRap.map((r, a) => {\n                            return (\n                                <TabPane tab={\n                                    <div className=\"theater__cumrap d-flex align-items-center\">\n                                        {/* className=\"theater__cumrap\" */}\n                                        <div className=\"theater__image mr-4\">\n                                            <img src={process.env.PUBLIC_URL + \"/img/bhd.jpg\"} alt=\"Rạp\" width=\"50px\" height=\"50px\" />\n                                        </div>\n                                        <div className=\"theater__infor\">\n                                            <p className=\"mb-0\">{r.TenCumRap}</p>\n                                            <div className=\"theater__address\">\n                                                <span>\n                                                    {r.ThongTin}\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                } key={a}>\n                                    {/* Danh sách phim */}\n                                    <div className=\"showtime__content\">\n                                        {theater.mangLichChieu.map((lichChieu, index) => {\n                                            // console.log(\"lichChieu\", lichChieu);\n                                            return lichChieu.ListCumRap.map((lc, i) => {\n                                                if (lc.MaCumRap === r.MaCumRap) {\n                                                    console.log(\"lc.MaCumRap\", lc.MaCumRap);\n                                                    return lc.ListPhim.map((phim, i) => {\n                                                        // if (duration == 0) \n                                                        if (this.checkLichChieu(phim)) {\n                                                            return (\n                                                                <div key={i} className=\"row  py-4 pl-4 showtime__movie\">\n                                                                    <div className=\"col-2\">\n                                                                        <img data-fancybox=\"images\" src={phim.HinhAnh} className=\"img-fluid\" />\n                                                                    </div>\n                                                                    <div className=\"col-10\">\n                                                                        <div className=\"showtime__detail\">\n                                                                            <div className='mb-3 d-flex'>\n                                                                                {phim.ListTheLoai.map((theLoai, i) => {\n                                                                                    return (<Tag key={i} style={{ fontSize: '14px', textTransform: 'uppercase' }} color=\"orange\">{theLoai.TenTheLoai}</Tag>)\n                                                                                })}\n                                                                            </div>\n                                                                            <h1>{phim.TenPhim}</h1>\n                                                                            <p>{phim.MoTa}</p>\n                                                                            <a href=\"#\" className=\"d-block mb-4\">\n                                                                                FULL SYNOPSIS\n                                                                         <i className=\"fa fa-angle-right\" />\n                                                                            </a>\n                                                                            <div className=\"showtime__list d-flex align-items-center\">\n                                                                                <i className=\"fa fa-clock-o  mr-2\" />\n                                                                                <span className=\"mr-2\" style={{ width: '120px' }}> VIEWING TIMES</span>\n                                                                                {\n                                                                                    phim.ListNgayChieuGioChieu.map((tgc, tgcIndex) => {\n                                                                                        // console.log('tgc', tgc);\n                                                                                        let thoiGianChieu = moment(new Date(tgc.ThoiGianChieu)).format(\"DD.MM.YYYY\");\n                                                                                        let thoiGianView = new Date(tgc.ThoiGianChieu);\n                                                                                        var now = moment(new Date()).format(\"DD.MM.YYYY\"); //todays date\n                                                                                        // console.log('now', now, \"thoiGianChieu\", thoiGianChieu);\n                                                                                        var startDate = moment(thoiGianChieu, \"DD.MM.YYYY\");\n                                                                                        var endDate = moment(now, \"DD.MM.YYYY\");\n                                                                                        var duration = endDate.diff(startDate, 'days');\n                                                                                        // Lấy thời gian hiện tại\n                                                                                        var parseTime = timeString => moment(timeString, 'HH:mm')\n                                                                                        let timeCurrent = moment(new Date()).format(\"HH:mm\");\n                                                                                        let timeLC = moment(new Date(tgc.ThoiGianChieu)).format(\"HH:mm\");\n                                                                                        // var days = (duration);\n                                                                                        // console.log(\"days\", parseTime(timeLC).isAfter(parseTime(timeCurrent)))\n                                                                                        // days.toFixed(0)\n                                                                                        if (duration === 0) {\n                                                                                            console.log(phim.MaPhim, parseTime(timeLC).isBefore(parseTime(timeCurrent)));                                                                                            \n                                                                                            return (\n                                                                                                <div key={tgcIndex}>\n                                                                                                    <button key={tgcIndex} className=\"btn m-1\" disabled={parseTime(timeLC).isBefore(parseTime(timeCurrent))} onClick={() => this.handleBookingPage(tgc.MaLichChieu)\n                                                                                                    }>{thoiGianView.toLocaleTimeString()}</button>\n                                                                                                </div>\n                                                                                            )\n                                                                                        }\n\n                                                                                    })\n                                                                                }\n\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            )\n                                                        }\n                                                    })\n\n                                                }\n                                            })\n\n                                        })}\n                                    </div>\n                                </TabPane>\n                            )\n                        })}\n                    </Tabs>\n                </TabPane>\n            )\n        })\n    }\n\n    renderTime = () => {\n\n    }\n\n    renderLichChieuHTR = (maHeThongRap) => {\n        this.props.getLichChieuHTRList(maHeThongRap);\n    }\n\n    render() {\n        const theaterSystemArray = this.props.theaterSystemArray;\n        // console.log(\"theaterSystemArray\", theaterSystemArray);\n        // Tabs\n        const { TabPane } = Tabs;\n        function callback(key) {\n            console.log(key);\n        }\n\n        return (\n            <div>\n                {/* SHOWTIMES */}\n                <section className=\"showtime\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div className=\"col-12\">\n                                <h1 className=\"section-title\">showtimes MOVIES</h1>\n                            </div>\n                        </div>\n                        <div className=\"showtime__frame container\">\n                            <Tabs tabPosition=\"left\" defaultActiveKey=\"0\">\n                                {this.renderTheaterSystemList()}\n                            </Tabs>\n                        </div>\n                    </div>\n                </section>\n                {/* END SHOWTIMES */}\n\n            </div>\n        )\n    }\n}\n\n// ReactDOM.render(<ShowtimesHome />, mountNode);\n\n\nconst mapStateToProps = state => {\n    return {\n        theaterSystemArray: state.TheaterSystemManageReducer.theaterSystemArray,\n        theaterArray: state.TheaterSystemManageReducer.theaterArray\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        getTheaterSystemList: () => {\n            dispatch(getTheaterSystemListAction())\n        },\n        getTheaterList: (maHeThongRap) => {\n            // console.log(maHeThongRap);\n            dispatch(getTheaterListAction(maHeThongRap))\n        },\n        getLichChieuHTRList: (maHeThongRap) => {\n            dispatch(getLichChieuHTRListAction(maHeThongRap))\n        }\n    }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ShowtimesHome));"]},"metadata":{},"sourceType":"module"}